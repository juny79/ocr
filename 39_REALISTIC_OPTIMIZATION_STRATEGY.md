# λ¦¬λ”λ³΄λ“ μ μ κ·Ήλ€ν™” μ „λµ (2026-02-08)

## π“ ν„μ¬ μƒν™©

| ν•­λ© | κ°’ |
|------|------|
| ν„μ¬ μµκ³  μ μ | **H=0.9843** (P=0.9881, R=0.9814) |
| νλΌλ―Έν„° | thresh=0.23, box_thresh=0.26, min_votes=3, iou=0.5 |
| μµκ·Ό μ μ¶ | thresh=0.225/box=0.255 β†’ H=0.9842 (λ™μΌ μμ¤€) |
| κ°€μ¤‘μΉ λ³€κ²½ ν¨κ³Ό | λ―Έλ―Έ (18/45,356κ° λ°•μ¤λ§ λ³€κ²½) |

---

## β… μ¦‰μ‹ μ‹¤ν–‰ μ™„λ£ (10λ¶„ μ†μ”)

### 1. μ•™μƒλΈ” νλΌλ―Έν„° μµμ ν™” (μ™„λ£ β“)

**7κ° λ³€ν• CSV μƒμ„±** (κΈ°μ΅΄ JSON μ¬ν™μ© β†’ μ¬μ¶”λ΅  λ¶ν•„μ”):

| CSV νμΌ | IoU | MinVotes | λ°•μ¤ μ | μμƒ ν¨κ³Ό |
|----------|-----|----------|---------|-----------|
| `hrnet_ensemble_baseline.csv` | 0.5 | 3 | 45,356 | ν„μ¬ μ„¤μ • |
| `hrnet_ensemble_min2_iou50.csv` | 0.5 | **2** | 46,256 | **Recallβ†‘** (λ” λ§μ€ λ°•μ¤) |
| `hrnet_ensemble_min4_iou50.csv` | 0.5 | **4** | 44,462 | **Precisionβ†‘** (μ—„κ²©) |
| `hrnet_ensemble_min3_iou40.csv` | **0.4** | 3 | 45,436 | λμ¨ν• λ§¤μΉ­ |
| `hrnet_ensemble_min3_iou60.csv` | **0.6** | 3 | 45,254 | μ—„κ²©ν• λ§¤μΉ­ |
| `hrnet_ensemble_min3_iou45.csv` | 0.45 | 3 | 45,399 | - |
| `hrnet_ensemble_min3_iou55.csv` | 0.55 | 3 | 45,302 | - |

**κ¶μ¥ μ μ¶ μμ„**:
1. `min2_iou50` (Recall ν–¥μƒ κΈ°λ€ β†’ Hβ†‘)
2. `min4_iou50` (Precision ν–¥μƒ κΈ°λ€ β†’ μ•μ •μ„±β†‘)
3. 1-2 κ²°κ³Ό λ³΄κ³  λ‚λ¨Έμ§€ κ²°μ •

---

## π€ μ¦‰μ‹ κ°€λ¥ν• μ¶”κ°€ μ‹¤ν—

### Option A: μ μ•λ ν›„μ²λ¦¬ νλΌλ―Έν„° ν…μ¤νΈ (8λ¶„ μ†μ”)

**νλΌλ―Έν„°**:
- thresh=0.1505 (ν„μ¬ 0.225 β†’ λ” λ‚®μ β†’ λ” λ§μ€ λ°•μ¤ κ²€μ¶)
- box_thresh=0.4008 (ν„μ¬ 0.255 β†’ λ” λ†’μ β†’ λ†’μ€ ν’μ§λ§)

**μ‹¤ν–‰ λ°©λ²•**:
```bash
cd /data/ephemeral/home/baseline_code
nohup python -u runners/generate_ensemble_suggested_params.py > logs/suggested_params.log 2>&1 &
```

**μμƒ ν¨κ³Ό**:
- β οΈ thresh λ€ν­ ν•λ½ β†’ FP μ¦κ°€ μ„ν—
- β… box_thresh μƒμΉ β†’ ν’μ§ ν•„ν„°λ§ κ°•ν™”
- π² **μ‹¤ν—μ **: 0.9840~0.9850 λ²”μ„ μμƒ

**λ¦¬μ¤ν¬**: 
- λ„λ¬΄ λ‚®μ€ thresh β†’ λ…Έμ΄μ¦ λ°•μ¤ λ€λ‰ κ²€μ¶ β†’ Precision ν•λ½
- ν•μ§€λ§ box_thresh 0.4008μ΄ λ³΄μ™„ β†’ μ‹λ„ κ°€μΉ μμ

---

### Option B: λ‹¤μ–‘ν• thresh/box_thresh μ΅°ν•© grid search

ν„μ¬ `sweep_thresh_box_grid.py`κ°€ μ΄λ―Έ κµ¬ν„λμ–΄ μμΌλ‚, **μ‹κ°„ μ†μ” νΌ** (100 images Γ— 9 combos = 20λ¶„).

**μ¶”μ²ν•μ§€ μ•μ**: μ„ 7κ° μ•™μƒλΈ” λ³€ν• + Option Aλ΅ μ¶©λ¶„.

---

## β Phase 1 μ μ• κ²€ν†  κ²°κ³Ό

| μ μ• | ν„μ‹¤μ„± | νλ‹¨ |
|------|--------|------|
| **Step 1**: use_polygon=true μ¬ν•™μµ | λ©°μΉ  μ†μ” | β μ‹κ°„ λ¶€μ΅± |
| **Step 2**: DB Loss beta=12 | λ©°μΉ  μ†μ” | β μ‹κ°„ λ¶€μ΅± |
| **Step 3**: Brightness μ¦κ°• | λ©°μΉ  μ†μ” | β μ‹κ°„ λ¶€μ΅± |
| **Step 4**: ν›„μ²λ¦¬ νλΌλ―Έν„° λ³€κ²½ | β… μ¦‰μ‹ κ°€λ¥ | β… **μ‹¤ν–‰ μ™„λ£** |

**κ²°λ΅ **: μ¬ν•™μµ μ μ•μ€ ν„μ‹¤μ μΌλ΅ λ¶κ°€. **ν›„μ²λ¦¬ μµμ ν™”κ°€ μ μΌν• μ¦‰μ‹ μ „λµ**.

---

## π“ μμƒ μ μ λ²”μ„ (ν„μ‹¤μ )

| μ „λµ | μμƒ H-Mean | κ·Όκ±° |
|------|-------------|------|
| ν„μ¬ μµκ³  | **0.9843** | thresh=0.23, box=0.26 |
| min2_iou50 | **0.9840~0.9850** | Recallβ†‘ but FPβ†‘ |
| min4_iou50 | **0.9835~0.9845** | Precisionβ†‘ but Recallβ†“ |
| suggested (0.1505/0.4008) | **0.9840~0.9855** | μ‹¤ν—μ , λ¦¬μ¤ν¬ μμ |

**ν„μ‹¤μ  λ©ν‘**: **0.9845~0.9850** (Phase 1 μ¬ν•™μµ μ—†μ΄λ” +0.5%pκ°€ ν„μ‹¤μ  ν•κ³„)

---

## π― μ¦‰μ‹ μ‹¤ν–‰ κ³„ν

### 1λ‹¨κ³„: κΈ°μ΅΄ λ³€ν• μ μ¶ (λ°”λ΅ κ°€λ¥)

```bash
# μ μ¶ νμΌ μ„μΉ
/data/ephemeral/home/hrnet_ensemble_min2_iou50.csv  # Recallβ†‘
/data/ephemeral/home/hrnet_ensemble_min4_iou50.csv  # Precisionβ†‘
```

**μμ„**:
1. min2_iou50 μ μ¶ β†’ κ²°κ³Ό ν™•μΈ
2. min4_iou50 μ μ¶ β†’ κ²°κ³Ό ν™•μΈ
3. λ” λ‚μ€ μ½ λ°©ν–¥μΌλ΅ λ―Έμ„Έ μ΅°μ •

---

### 2λ‹¨κ³„: μ μ• νλΌλ―Έν„° ν…μ¤νΈ (μ„ νƒ, 8λ¶„)

```bash
cd /data/ephemeral/home/baseline_code
nohup python -u runners/generate_ensemble_suggested_params.py > logs/suggested_params.log 2>&1 &

# μ§„ν–‰ ν™•μΈ
tail -f logs/suggested_params.log
```

**μ΅°κ±΄λ¶€ μ‹¤ν–‰**: 1λ‹¨κ³„ κ²°κ³Όκ°€ 0.9843 λ―Έλ§μ΄λ©΄ μ¦‰μ‹ μ‹¤ν–‰.

---

## π” unclip_ratio λ¬Έμ  (μ½”λ“ μμ • ν•„μ”)

**ν„μ¬ μƒνƒ**:
- `db_postprocess.py` Line 146: `unclip_ratio=2.0` (polygon λ¨λ“, ν•λ“μ½”λ”©)
- `db_postprocess.py` Line 208: `unclip_ratio=1.5` (box λ¨λ“, λ””ν΄νΈ)

**μ μ•κ°’**: 
- box_unclip_ratio=1.8749
- polygon_unclip_ratio=1.3102

**λ¬Έμ **: 
- β μ¶”λ΅  μ‹μ μ— Hydraλ΅ override λ¶κ°€ (μ½”λ“μ— ν•λ“μ½”λ”©λ¨)
- β… ν•΄κ²°μ±…: `db_postprocess.py` μμ • + μ¬μ¶”λ΅  (8λ¶„)

**μ°μ„ μμ„**: **λ‚®μ** (μ•™μƒλΈ” νλΌλ―Έν„° μµμ ν™”κ°€ λ” ν¨κ³Όμ )

---

## π“ κµν› & ν„μ‹¤ μ²΄ν¬

### Phase 1 μ μ•μ λ¬Έμ μ 

1. **+5~10%p ν–¥μƒ**: κ³Όμ¥λ¨
   - use_polygon=trueλ” μ΄λ―Έ μ μ© μ¤‘ (config ν™•μΈ κ²°κ³Ό)
   - μ‹¤μ  ν¨κ³Ό: 0.1~0.3%p μ •λ„

2. **μ¬ν•™μµ μ‹κ°„**: 
   - 5-Fold Γ— 20 epochs Γ— 1.5μ‹κ°„ = **~150μ‹κ°„** (6μΌ)
   - Phase 1 = "1μΌ μ΄λ‚΄" β†’ **ν„μ‹¤κ³Ό κ΄΄λ¦¬**

3. **μ¦‰μ‹ μ μ© κ°€λ¥ν• κ²ƒ**:
   - ν›„μ²λ¦¬ νλΌλ―Έν„°λ§ (thresh, box_thresh, μ•™μƒλΈ”)
   - μμƒ ν¨κ³Ό: **+0.2~0.5%p** (0.9843 β†’ 0.9845~0.9850)

### ν„μ‹¤μ  μ „λµ

**μ¬ν•™μµ μ—†μ΄ 0.985 λνλ” μ–΄λ ¤μ›€**. ν•μ§€λ§:
- β… μ•™μƒλΈ” νλΌλ―Έν„° μµμ ν™”: μ¦‰μ‹ κ°€λ¥, μ•μ „
- β… μ μ• νλΌλ―Έν„° μ‹¤ν—: 8λ¶„, μ•½κ°„μ λ¦¬μ¤ν¬
- β… λ‹¤μ–‘ν• μ΅°ν•© μ μ¶: μ΄ μΆ‹μΌλ©΄ +0.0005~0.0010

**λ©ν‘ μ΅°μ •**: **0.9845~0.9850** (ν„μ¬ 0.9843 β†’ +0.0002~0.0007)

---

## π“ μµμΆ… κ¶μ¥μ‚¬ν•­

### μ°μ„ μμ„ 1: μ¦‰μ‹ μ μ¶ (0λ¶„)

```bash
# νμΌ μ΅΄μ¬ ν™•μΈ
ls -lh /data/ephemeral/home/hrnet_ensemble_*.csv

# μ μ¶ μμ„
1. hrnet_ensemble_min2_iou50.csv
2. hrnet_ensemble_min4_iou50.csv
```

### μ°μ„ μμ„ 2: μ μ• νλΌλ―Έν„° (8λ¶„, μ„ νƒ)

```bash
cd /data/ephemeral/home/baseline_code
nohup python -u runners/generate_ensemble_suggested_params.py > logs/suggested_params.log 2>&1 &
```

### μ°μ„ μμ„ 3: μ¬ν•™μµ (μ‹κ°„ μμ„ λ•)

- use_polygon ν™•μΈ (μ΄λ―Έ μ μ©λμ–΄ μμ„ κ°€λ¥μ„±)
- DB Loss beta μ΅°μ •
- Brightness μ¦κ°• μ¶”κ°€

**μμƒ ν¨κ³Ό**: +0.3~0.5%p (0.9843 β†’ 0.985~0.987)
**μ†μ” μ‹κ°„**: 3~6μΌ

---

**μ‘μ„±**: 2026-02-08  
**ν„μ¬ μµκ³ **: H=0.9843  
**ν„μ‹¤μ  λ©ν‘**: H=0.9845~0.9850 (μ¬ν•™μµ μ—†μ΄)  
**μµμ„ μ μ „λµ**: μ•™μƒλΈ” νλΌλ―Έν„° μµμ ν™” + μ μ• νλΌλ―Έν„° μ‹¤ν—
